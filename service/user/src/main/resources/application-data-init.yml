server:
  port: ${SERVER_PORT:9000}

spring:
  application:
    name: techwikiplus-user-data-init
    
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://${MYSQL_HOST:localhost}:${MYSQL_PORT:13306}/${MYSQL_DATABASE:techwikiplus-user}?useSSL=false&serverTimezone=Asia/Seoul&characterEncoding=UTF-8&allowPublicKeyRetrieval=true&rewriteBatchedStatements=true&cachePrepStmts=true&useServerPrepStmts=true
    username: ${MYSQL_USER:techwikiplus}
    password: ${MYSQL_PASSWORD:techwikiplus}
    hikari:
      maximum-pool-size: 50          # 병렬 처리를 위해 풀 크기 증가
      minimum-idle: 20
      connection-timeout: 30000
      idle-timeout: 600000
      max-lifetime: 1800000
      
  jpa:
    open-in-view: false
    show-sql: false                  # 대량 삽입 시 로그 비활성화
    hibernate:
      ddl-auto: validate             # 스키마는 이미 존재한다고 가정
    properties:
      hibernate:
        # 배치 처리 최적화
        jdbc:
          batch_size: 5000           # 배치 크기
          batch_versioned_data: true
          fetch_size: 1000
        order_inserts: true          # INSERT 순서 최적화
        order_updates: true
        
        # 2차 캐시 비활성화 (대량 삽입 시 불필요)
        cache:
          use_second_level_cache: false
          use_query_cache: false
          
        # 통계 비활성화 (성능 향상)
        generate_statistics: false
        
  # 메일 서비스 비활성화 (데이터 초기화 시 불필요)
  mail:
    host: localhost
    port: 1025
    
  # Redis 비활성화 (데이터 초기화 시 불필요)
  data:
    redis:
      host: localhost
      port: 6379

# 로깅 설정
logging:
  level:
    root: INFO
    me.helloc.techwikiplus.service.user.infrastructure.init: INFO
    org.springframework: WARN
    org.hibernate: WARN
    org.hibernate.SQL: OFF          # SQL 로그 비활성화
    org.hibernate.type: OFF         # 파라미터 바인딩 로그 비활성화
    com.zaxxer.hikari: INFO         # 커넥션 풀 상태 확인

# 애플리케이션 설정
app:
  data-init:
    enabled: true
    clear-existing: true            # 기존 데이터 삭제 여부